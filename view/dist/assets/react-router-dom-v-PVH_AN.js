import{r as i,a as N}from"./react-1WNQf2Xy.js";import{a as H}from"./react-dom-EHSJNQHF.js";import{m as K,D as W,a as G,R as X,u as Y,N as q,b as J,c as V,d as I,e as Q}from"./react-router-lcMh3pW-.js";import{c as Z,b as $,E as ee,s as te,d as O}from"./@remix-run-G7a9tPFV.js";/**
 * React Router DOM v6.19.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function x(){return x=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},x.apply(this,arguments)}function ne(e,n){if(e==null)return{};var t={},a=Object.keys(e),r,s;for(s=0;s<a.length;s++)r=a[s],!(n.indexOf(r)>=0)&&(t[r]=e[r]);return t}function re(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ae(e,n){return e.button===0&&(!n||n==="_self")&&!re(e)}function U(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((n,t)=>{let a=e[t];return n.concat(Array.isArray(a)?a.map(r=>[t,r]):[[t,a]])},[]))}function ie(e,n){let t=U(e);return n&&n.forEach((a,r)=>{t.has(r)||n.getAll(r).forEach(s=>{t.append(r,s)})}),t}const se=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];function Le(e,n){return Z({basename:n==null?void 0:n.basename,future:x({},n==null?void 0:n.future,{v7_prependBasename:!0}),history:$({window:n==null?void 0:n.window}),hydrationData:(n==null?void 0:n.hydrationData)||oe(),routes:e,mapRouteProperties:K,window:n==null?void 0:n.window}).initialize()}function oe(){var e;let n=(e=window)==null?void 0:e.__staticRouterHydrationData;return n&&n.errors&&(n=x({},n,{errors:le(n.errors)})),n}function le(e){if(!e)return null;let n=Object.entries(e),t={};for(let[a,r]of n)if(r&&r.__type==="RouteErrorResponse")t[a]=new ee(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let s=window[r.__subType];if(typeof s=="function")try{let l=new s(r.message);l.stack="",t[a]=l}catch{}}if(t[a]==null){let s=new Error(r.message);s.stack="",t[a]=s}}else t[a]=r;return t}const ce=i.createContext({isTransitioning:!1}),ue=i.createContext(new Map),fe="startTransition",F=N[fe],de="flushSync",D=H[de];function he(e){F?F(e):e()}function _(e){D?D(e):e()}class ve{constructor(){this.status="pending",this.promise=new Promise((n,t)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",n(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",t(a))}})}}function be(e){let{fallbackElement:n,router:t,future:a}=e,[r,s]=i.useState(t.state),[l,d]=i.useState(),[f,o]=i.useState({isTransitioning:!1}),[u,p]=i.useState(),[h,T]=i.useState(),[w,P]=i.useState(),L=i.useRef(new Map),{v7_startTransition:C}=a||{},b=i.useCallback(c=>{C?he(c):c()},[C]),v=i.useCallback((c,y)=>{let{deletedFetchers:m,unstable_flushSync:k,unstable_viewTransitionOpts:g}=y;m.forEach(R=>L.current.delete(R)),c.fetchers.forEach((R,B)=>{R.data!==void 0&&L.current.set(B,R.data)});let z=t.window==null||typeof t.window.document.startViewTransition!="function";if(!g||z){k?_(()=>s(c)):b(()=>s(c));return}if(k){_(()=>{h&&(u&&u.resolve(),h.skipTransition()),o({isTransitioning:!0,flushSync:!0,currentLocation:g.currentLocation,nextLocation:g.nextLocation})});let R=t.window.document.startViewTransition(()=>{_(()=>s(c))});R.finished.finally(()=>{_(()=>{p(void 0),T(void 0),d(void 0),o({isTransitioning:!1})})}),_(()=>T(R));return}h?(u&&u.resolve(),h.skipTransition(),P({state:c,currentLocation:g.currentLocation,nextLocation:g.nextLocation})):(d(c),o({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}))},[t.window,h,u,L,b]);i.useLayoutEffect(()=>t.subscribe(v),[t,v]),i.useEffect(()=>{f.isTransitioning&&!f.flushSync&&p(new ve)},[f]),i.useEffect(()=>{if(u&&l&&t.window){let c=l,y=u.promise,m=t.window.document.startViewTransition(async()=>{b(()=>s(c)),await y});m.finished.finally(()=>{p(void 0),T(void 0),d(void 0),o({isTransitioning:!1})}),T(m)}},[b,l,u,t.window]),i.useEffect(()=>{u&&l&&r.location.key===l.location.key&&u.resolve()},[u,h,r.location,l]),i.useEffect(()=>{!f.isTransitioning&&w&&(d(w.state),o({isTransitioning:!0,flushSync:!1,currentLocation:w.currentLocation,nextLocation:w.nextLocation}),P(void 0))},[f.isTransitioning,w]);let S=i.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:c=>t.navigate(c),push:(c,y,m)=>t.navigate(c,{state:y,preventScrollReset:m==null?void 0:m.preventScrollReset}),replace:(c,y,m)=>t.navigate(c,{replace:!0,state:y,preventScrollReset:m==null?void 0:m.preventScrollReset})}),[t]),E=t.basename||"/",M=i.useMemo(()=>({router:t,navigator:S,static:!1,basename:E}),[t,S,E]);return i.createElement(i.Fragment,null,i.createElement(W.Provider,{value:M},i.createElement(G.Provider,{value:r},i.createElement(ue.Provider,{value:L.current},i.createElement(ce.Provider,{value:f},i.createElement(X,{basename:E,location:r.location,navigationType:r.historyAction,navigator:S},r.initialized?i.createElement(me,{routes:t.routes,state:r}):n))))),null)}function me(e){let{routes:n,state:t}=e;return Y(n,void 0,t)}const pe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",we=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ee=i.forwardRef(function(n,t){let{onClick:a,relative:r,reloadDocument:s,replace:l,state:d,target:f,to:o,preventScrollReset:u,unstable_viewTransition:p}=n,h=ne(n,se),{basename:T}=i.useContext(q),w,P=!1;if(typeof o=="string"&&we.test(o)&&(w=o,pe))try{let v=new URL(window.location.href),S=o.startsWith("//")?new URL(v.protocol+o):new URL(o),E=te(S.pathname,T);S.origin===v.origin&&E!=null?o=E+S.search+S.hash:P=!0}catch{}let L=J(o,{relative:r}),C=Se(o,{replace:l,state:d,target:f,preventScrollReset:u,relative:r,unstable_viewTransition:p});function b(v){a&&a(v),v.defaultPrevented||C(v)}return i.createElement("a",x({},h,{href:w||L,onClick:P||s?a:b,ref:t,target:f}))});var j;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(j||(j={}));var A;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(A||(A={}));function Se(e,n){let{target:t,replace:a,state:r,preventScrollReset:s,relative:l,unstable_viewTransition:d}=n===void 0?{}:n,f=V(),o=I(),u=Q(e,{relative:l});return i.useCallback(p=>{if(ae(p,t)){p.preventDefault();let h=a!==void 0?a:O(o)===O(u);f(e,{replace:h,state:r,preventScrollReset:s,relative:l,unstable_viewTransition:d})}},[o,f,u,a,r,t,e,s,l,d])}function Pe(e){let n=i.useRef(U(e)),t=i.useRef(!1),a=I(),r=i.useMemo(()=>ie(a.search,t.current?null:n.current),[a.search]),s=V(),l=i.useCallback((d,f)=>{const o=U(typeof d=="function"?d(r):d);t.current=!0,s("?"+o,f)},[s,r]);return[r,l]}export{Ee as L,be as R,Le as a,U as c,Pe as u};
